\chapter{Semantičko poređenje opštih AST}
\label{chp:ASTComparing}

Jedna od motivacija svođenja imperativnih jezika na isti nivo apstrakcije može biti poređenje kodova pisanih u različitim programskim jezicima. Pritom, s obzirom da su u pitanju stabla, moguće je koristiti razne algoritme za poređenje stabala (ali i grafova uopšte) nad ovakvim apstrakcijama. Dodatno, potrebno je i definisati kriterijum poređenja --- moguće je porediti kodove \emph{strukturno}, \emph{semantički} itd. U ovom radu je od značaja semantička ekvivalentnost, koja je u opštem slučaju neodlučiv problem. Međutim, ukoliko se ograničimo samo na strukturno slične kodove, moguće je dobiti smislene rezultate u praksi, nalik na one dobijene u ovom radu. Precizna definicija strukturne sličnosti se obično iskazuje u terminima sličnosti strukture njihovih apstrakcija. Naravno, postoje kodovi koji nisu strukturno ekvivalentni ali su semantički ekvivalentni --- takvi slučajevi se onda neće razmatrati zbog neispunjenosti pretpostavke o strukturnoj sličnosti. 

Pretpostavka strukturne sličnosti je ograničavajuća i znatno smanjuje broj slučajeva upotrebe takvog upoređivača. Međutim, danas je od velikog značaja provera ispravnosti programa dobijenih sitnim refaktorisanjem već postojećih programa, nekada ne menjajući strukturu uopšte (a ako se struktura koda menja onda se to obično radi u manjim koracima između kojih i dalje može da važi pretpostavka strukturne sličnosti kodova u susednim koracima). Slično, prepisivanje programa sa jednog programskog jezika na drugi se javlja najčešće prilikom migracija na nove tehnologije. U takvim situacijama implicitno je prisutna strukturna slučnost, što zavisi od konkretnih programskih jezika ali se u praksi često smanjuje napor tako što se održava struktura koda, barem u inicijalnim verzijama. 

Definicija strukturne sličnosti za potrebe ovog rada će se odnositi na sličnosti u rasporedu blokova naredbi dok će raspored naredbi u blokovima biti nebitan. Na primer, ukoliko se prvi program sastoji od bloka naredbi u kome se nalaze dva druga bloka, očekuje se da i drugi program ima istu organizaciju blokova, pri čemu se pod terminom blok podrazumevaju i složene naredbe koje se sastoje od bloka naredbi u sebi, kao što su definicije funkcija, uslovna grananja, petlje i ostali tipovi složenih naredbi opisanih u \ref{subsec:MyASTStatementNodes}. Pod ovim uslovima, moguće je porediti blokove prvog programa sa odgovarajućim blokovima drugog programa.

Neophodno je napomenuti da se apstahovanjem gube informacije koje su od važnosti za statičku analizu, stoga sve pozitivne rezultate analize sprovedene u ovom radu je potrebno pažljivo razmotriti. Konkretno, tipovi podataka u jezicima koji ne propisuju striktno veličinu tipova (npr.~celobrojni tip u programskom jeziku C) možda neće biti pravilno predstavljeni u apstrakciji. Prilikom rada sa ovim vrednostima u nekim slučajevima može doći do prekoračenja, ili nedostatka prekoračenja, što je različito ponašanje od originalnog. Takođe, ukoliko se apstrahuje specifikacija pisana u programskom jeziku koji ne propisuje striktno redosled izračunavanja operanada izraza, prilikom analize neće nužno biti isti redosled izvršavanja operanada izraza u odnosu na specifikaciju.

\input{chapters/51_symbolics.tex}
\input{chapters/52_compare_algorithm.tex}
