\chapter{Opis opštih AST apstrakcija za imperativne jezike}
\label{chp:MyAST}

Kao što je opisano u odeljku \ref{sec:Paradigms}, dosta različitih "pod-paradigmi" potiče iz imperativne paradigme. Strukturna, proceduralna i skript paradigma, iako naizgled različite, poseduju veliki broj sličnih osobina i koncepata. Moderni programski jezici uzimaju korisne koncepte iz svakakvih paradigmi pa je teško vezati jezik za jednu konkretnu paradigmu. Ovo je motivacija za apstrahovanje koncepata različitih paradigmi, ali pre svega imperativne i njenih "derivata" --- proceduralne, skript i objektno orijentisane. U ovom poglavlju će biti opisana opšta apstrakcija za imperativnu paradigmu i njene derivate. To uključuje i skript jezike koji, kako će biti pokazano u ovom radu, mogu da se posmatraju na istom nivou kao i svoji proceduralni "rođaci".

Svaki programski jezik ima svoju gramatiku i na osnovu toga ima svoja gramatička pravila koja se oslikavaju u apstraktnim sintaksnim stablima tih jezika. Na slikama \ref{fig:ASTLua} i \ref{fig:ASTGo} se mogu videti razlike jezika \texttt{Lua} i \texttt{Go}, kao primere skript odnosno proceduralne paradigme, kad se posmatra njihov AST.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.6]{images/ast_lua.png}
\caption{AST isečka koda pisanog u programskom jeziku Lua. Prikazano putem \url{https://astexplorer.net/}}
\label{fig:ASTLua}
\end{figure}

\begin{figure}[h!]
\centering
\includegraphics[scale=0.7]{images/ast_go.png}
\caption{AST isečka koda pisanog u programskom jeziku Go. Prikazano putem \url{https://astexplorer.net/}}
\label{fig:ASTGo}
\end{figure}

Kako bi se kreirala smislena apstrakcija stabla parsiranja, potrebno je identifikovati bitne informacije u stablu parsiranja ali i koncepte same gramatike koji su ponovno upotrebljivi. Najjednostavnije rešenje je mimikovati čvorove stabla parsiranja, ukoliko su gramatička pravila kreirana tako da oslikaju koncepte jezika koji gramatika definiše. Na primer, ukoliko u gramatici imamo pravilo \texttt{deklaracija} sa alternativama \texttt{deklaracijaPromenljive} i \texttt{deklaracijaFunkcije}, možemo kreirati apstraktni koncept \texttt{Deklaracija} sa konkretizacijama \texttt{DeklaracijaPromenljive} i \texttt{DeklaracijaFunkcije}. Kako se definišu deklaracije promenljivih i funkcija zavisi dalje od definicija pravila \texttt{deklaracijaPromenljive} i \texttt{deklaracijaFunkcije}. Naravno, nije uvek moguće primeniti ovakav postupak. Takođe, nekada u gramatici definišemo pomoćna pravila kako bismo se izborili sa rekurzijom ili izbegli neke tipove rekurzije --- ta pravila ne bi trebalo da imaju odgovarajuće tipove u opštoj apstrakciji. 

Pošto su u pitanju gramatike programskih jezika, onda je jasno da dosta različitih gramatika dele slične koncepte i da je moguće definisati tipove čvorova koji odgovaraju tim konceptima. Neki od njih mogu biti: naredba, izraz, deklaracija, poziv funkcije, dodela itd. Može se uočiti i hijerarhija između navedenih koncepata, međutim poziv funkcije se može smatrati kao samostalna naredba ali može biti i deo izraza. Dakle, prilikom definisanja hijerarhije ne treba dozvoliti nešto što nema smisla (npr. ako je dozvoljeno višestruko nasleđivanje i poziv funkcije je i naredba ali i izraz, onda se izrazi u kojima figurišu pozivi funkcija sastoje od više naredbi.).

Osim naredbi i izraza (koje vezuju operatori), kao osnovnih koncepata imperativnih jezika, deklaracije se ne pojavljuju u skript jezicima zbog slabe tipiziranosti. Moguće je, međutim, posmatrati i promenljive u kodovima skript jezika kao promenljive deklarisane neposredno pre trenutka njihove upotrebe --- detaljnije opisano u \ref{sec:MyASTDeclarationNodes}. Što se tiče njihovog tipa, može biti dozvoljena promena istog, ili, kako je izabrano u ovom radu, biće iskorišćen specijalni tip od kog potiču svi ostali tipovi.

\begin{figure}[h!]
\centering
\includegraphics[scale=0.6]{images/nodes.png}
\caption{Prikaz osnovnih vrsta AST čvorova.}
\label{fig:ASTNode}
\end{figure}

Na slici \ref{fig:ASTNode} se mogu videti osnovni tipovi AST čvorova zasnovani na konceptima opisanim iznad. U nastavku će po odeljcima biti detaljnije opisan svaki od prikazanih tipova.

\input{chapters/31_declaration_nodes.tex}
\input{chapters/32_operator_nodes.tex}
\input{chapters/33_expression_nodes.tex}
\input{chapters/34_statement_nodes.tex}
